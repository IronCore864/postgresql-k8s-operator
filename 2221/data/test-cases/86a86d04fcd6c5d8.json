{"uid":"86a86d04fcd6c5d8","name":"test_forceful_restart_without_data_and_transaction_logs","fullName":"tests.integration.ha_tests.test_self_healing#test_forceful_restart_without_data_and_transaction_logs","historyId":"1ab295315f12ae381caee21d2bb9082a","time":{"start":1714096548985,"stop":1714096650652,"duration":101667},"description":"A forceful restart with deleted data and without transaction logs (forced clone).","descriptionHtml":"<p>A forceful restart with deleted data and without transaction logs (forced clone).</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1714095195913,"stop":1714095195913,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1714095195913,"stop":1714095196153,"duration":240},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1714095195913,"stop":1714095195913,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout","time":{"start":1714095490742,"stop":1714095492909,"duration":2167},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1714096542771,"stop":1714096542771,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1714096542771,"stop":1714096542771,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wal_settings","time":{"start":1714096542771,"stop":1714096548984,"duration":6213},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"A forceful restart with deleted data and without transaction logs (forced clone).","status":"passed","steps":[],"attachments":[{"uid":"7412e331b7a0c1be","name":"log","source":"7412e331b7a0c1be.txt","type":"text/plain","size":3950}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"wal_settings::finalizer","time":{"start":1714096650652,"stop":1714096650761,"duration":109},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes::finalizer","time":{"start":1714096650761,"stop":1714096651796,"duration":1035},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1714096651796,"stop":1714096651796,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout::finalizer","time":{"start":1714098405102,"stop":1714098557254,"duration":152152},"status":"broken","statusMessage":"tenacity.RetryError: RetryError[<Future at 0x7f4fb9538520 state=finished raised RetryError>]\n","statusTrace":"  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/.tox/integration/lib/python3.10/site-packages/allure_commons/_allure.py\", line 221, in __call__\n    return self._fixture_function(*args, **kwargs)\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 302, in finalizer\n    event_loop.run_until_complete(async_finalizer())\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 294, in async_finalizer\n    await gen_obj.__anext__()\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/tests/integration/ha_tests/conftest.py\", line 68, in primary_start_timeout\n    await change_patroni_setting(ops_test, \"primary_start_timeout\", initial_primary_start_timeout)\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/tests/integration/ha_tests/helpers.py\", line 97, in change_patroni_setting\n    for attempt in Retrying(stop=stop_after_delay(30 * 2), wait=wait_fixed(3)):\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 347, in __iter__\n    do = self.iter(retry_state=retry_state)\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 326, in iter\n    raise retry_exc from fut.exception()\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1714098557255,"stop":1714098557620,"duration":365},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1714098557621,"stop":1714098557622,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1714098557622,"stop":1714098557622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1714098557622,"stop":1714098557622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"fv-az840-177"},{"name":"thread","value":"12465-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":3,"broken":3,"skipped":4,"passed":65,"unknown":0,"total":75},"items":[{"uid":"55abef0e4c092c31","reportUrl":"../2208//#testresult/55abef0e4c092c31","status":"passed","time":{"start":1714010238077,"stop":1714010299225,"duration":61148}},{"uid":"bb7c9b177b91859c","reportUrl":"../2199//#testresult/bb7c9b177b91859c","status":"passed","time":{"start":1713837725452,"stop":1713837783352,"duration":57900}},{"uid":"245921f0ec022e18","reportUrl":"../2186//#testresult/245921f0ec022e18","status":"passed","time":{"start":1713750789946,"stop":1713750855613,"duration":65667}},{"uid":"a21094d15ce3bb7c","reportUrl":"../2176//#testresult/a21094d15ce3bb7c","status":"passed","time":{"start":1713664457476,"stop":1713664512942,"duration":55466}},{"uid":"a4bb5badd7c1be0","reportUrl":"../2170//#testresult/a4bb5badd7c1be0","status":"passed","time":{"start":1713577928403,"stop":1713577994694,"duration":66291}},{"uid":"ad9cf2308f4e2978","reportUrl":"../2168//#testresult/ad9cf2308f4e2978","status":"passed","time":{"start":1713491607406,"stop":1713491828823,"duration":221417}},{"uid":"40fd19d113a5a523","reportUrl":"../2166//#testresult/40fd19d113a5a523","status":"passed","time":{"start":1713405108646,"stop":1713405169768,"duration":61122}},{"uid":"33959c864d6ec75f","reportUrl":"../2161//#testresult/33959c864d6ec75f","status":"passed","time":{"start":1713318916410,"stop":1713318971486,"duration":55076}},{"uid":"e68057afd09d9330","reportUrl":"../2156//#testresult/e68057afd09d9330","status":"passed","time":{"start":1713151219882,"stop":1713151282410,"duration":62528}},{"uid":"a8a095432edadd10","reportUrl":"../2154//#testresult/a8a095432edadd10","status":"passed","time":{"start":1713059649511,"stop":1713059711447,"duration":61936}},{"uid":"c293c816f242be8a","reportUrl":"../2153//#testresult/c293c816f242be8a","status":"passed","time":{"start":1712972777144,"stop":1712972838151,"duration":61007}},{"uid":"a8380647ed1bd0e2","reportUrl":"../2151//#testresult/a8380647ed1bd0e2","status":"passed","time":{"start":1712887126435,"stop":1712887189950,"duration":63515}},{"uid":"db10743409375708","reportUrl":"../2144//#testresult/db10743409375708","status":"passed","time":{"start":1712800350472,"stop":1712800412355,"duration":61883}},{"uid":"eafdbac0240201a9","reportUrl":"../2128//#testresult/eafdbac0240201a9","status":"passed","time":{"start":1712713916301,"stop":1712714017084,"duration":100783}},{"uid":"8752bd1dbdc777ab","reportUrl":"../2112//#testresult/8752bd1dbdc777ab","status":"passed","time":{"start":1712541173096,"stop":1712541229302,"duration":56206}},{"uid":"3b799502e629afa9","reportUrl":"../2111//#testresult/3b799502e629afa9","status":"passed","time":{"start":1712454756674,"stop":1712454822074,"duration":65400}},{"uid":"b95450e9fe99de7b","reportUrl":"../2110//#testresult/b95450e9fe99de7b","status":"passed","time":{"start":1712368317679,"stop":1712368567182,"duration":249503}},{"uid":"1d40fb1e1d83f898","reportUrl":"../2106//#testresult/1d40fb1e1d83f898","status":"passed","time":{"start":1712281965039,"stop":1712282022171,"duration":57132}},{"uid":"b2fab3f58775fa7e","reportUrl":"../2100//#testresult/b2fab3f58775fa7e","status":"passed","time":{"start":1712195584747,"stop":1712195642119,"duration":57372}},{"uid":"37e44ee4bff1317f","reportUrl":"../2097//#testresult/37e44ee4bff1317f","status":"passed","time":{"start":1712109083136,"stop":1712109147566,"duration":64430}}]},"tags":["asyncio","group(1)"]},"source":"86a86d04fcd6c5d8.json","parameterValues":[]}