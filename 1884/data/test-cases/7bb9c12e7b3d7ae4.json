{"uid":"7bb9c12e7b3d7ae4","name":"test_mattermost_db","fullName":"tests.integration.test_tls#test_mattermost_db","historyId":"cdae414860de0e7068bea24175d8d4b0","time":{"start":1707787695727,"stop":1707788878458,"duration":1182731},"description":"Deploy Mattermost to test the 'db' relation.\n\n    Mattermost needs TLS enabled on PostgreSQL to correctly connect to it.\n\n    Args:\n        ops_test: The ops test framework\n    ","descriptionHtml":"<p>Deploy Mattermost to test the 'db' relation.</p>\n<pre><code>Mattermost needs TLS enabled on PostgreSQL to correctly connect to it.\n\nArgs:\n    ops_test: The ops test framework\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1707787687332,"stop":1707787687333,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1707787687333,"stop":1707787687333,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1707787687333,"stop":1707787687577,"duration":244},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1707787695727,"stop":1707787695727,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Deploy Mattermost to test the 'db' relation.\n\n    Mattermost needs TLS enabled on PostgreSQL to correctly connect to it.\n\n    Args:\n        ops_test: The ops test framework\n    ","status":"passed","steps":[],"attachments":[{"uid":"eab343565d77cf70","name":"log","source":"eab343565d77cf70.txt","type":"text/plain","size":9231}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1707788878459,"stop":1707788878459,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1707788878460,"stop":1707788878847,"duration":387},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1707788878848,"stop":1707788878848,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1707788878848,"stop":1707788878848,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1707788878848,"stop":1707788878848,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_tls"},{"name":"host","value":"fv-az837-708"},{"name":"thread","value":"12337-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_tls"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":2,"broken":5,"skipped":0,"passed":6,"unknown":0,"total":13},"items":[{"uid":"1644c882a8c75563","reportUrl":"../1881//#testresult/1644c882a8c75563","status":"passed","time":{"start":1707701263815,"stop":1707702854073,"duration":1590258}},{"uid":"f8a7eee652555c2e","reportUrl":"../1880//#testresult/f8a7eee652555c2e","status":"passed","time":{"start":1707614939383,"stop":1707616121445,"duration":1182062}},{"uid":"f5741bb09af1c4c2","reportUrl":"../1879//#testresult/f5741bb09af1c4c2","status":"failed","statusDetails":"AssertionError: TLS is not being used on pg_rewind connections\nassert 'connection authorized: user=rewind database=postgres SSL enabled' in '/var/log/postgresql/postgresql-6_0128.log:2024-02-10 01:28:23 UTC [401]: user=operator,db=postgres,app=[unknown],client=10.1.0.93,line=5 LOG:  statement: GRANT ALL PRIVILEGES ON DATABASE postgres TO \"rewind\";\\n/var/log/postgresql/postgresql-6_0144.log:2024-02-10 01:44:20 UTC [4423]: user=operator,db=postgres,app=[unknown],client=10.1.0.93,line=4 LOG:  statement: CREATE TABLE pgrewindtest (testcol INT);\\n'","time":{"start":1707528399795,"stop":1707529650055,"duration":1250260}},{"uid":"a0ecb9313444ad76","reportUrl":"../1875//#testresult/a0ecb9313444ad76","status":"passed","time":{"start":1707442080948,"stop":1707443317186,"duration":1236238}},{"uid":"acfe905ccf58c96f","reportUrl":"../1870//#testresult/acfe905ccf58c96f","status":"broken","statusDetails":"juju.errors.JujuAppError: App in error: postgresql-k8s","time":{"start":1707355642961,"stop":1707355654795,"duration":11834}},{"uid":"82a4ac14c5c2a53a","reportUrl":"../1866//#testresult/82a4ac14c5c2a53a","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: mattermost/0","time":{"start":1707269222766,"stop":1707270302494,"duration":1079728}},{"uid":"9ee4eda58d500933","reportUrl":"../1862//#testresult/9ee4eda58d500933","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: mattermost/0","time":{"start":1707182859326,"stop":1707183788859,"duration":929533}},{"uid":"a5a38d6356f6e95c","reportUrl":"../1852//#testresult/a5a38d6356f6e95c","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/2 [idle] active:","time":{"start":1707096512123,"stop":1707097514393,"duration":1002270}},{"uid":"3ba421ed764ff931","reportUrl":"../1851//#testresult/3ba421ed764ff931","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/2 [executing] active:","time":{"start":1707010175807,"stop":1707011178569,"duration":1002762}},{"uid":"59303faa7d2d74e7","reportUrl":"../1850//#testresult/59303faa7d2d74e7","status":"passed","time":{"start":1706923604374,"stop":1706924707018,"duration":1102644}},{"uid":"2e1c7b63d4ba9a10","reportUrl":"../1842//#testresult/2e1c7b63d4ba9a10","status":"failed","statusDetails":"AssertionError","time":{"start":1706837271187,"stop":1706838452497,"duration":1181310}},{"uid":"748cb33f253cf8d6","reportUrl":"../1834//#testresult/748cb33f253cf8d6","status":"passed","time":{"start":1706751011157,"stop":1706752107029,"duration":1095872}}]},"tags":["asyncio","group(1)"]},"source":"7bb9c12e7b3d7ae4.json","parameterValues":[]}