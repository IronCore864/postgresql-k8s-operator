{"uid":"1e5be9cdaa1e86ee","name":"test_mattermost_db","fullName":"tests.integration.test_tls#test_mattermost_db","historyId":"cdae414860de0e7068bea24175d8d4b0","time":{"start":1709083617833,"stop":1709084901167,"duration":1283334},"description":"Deploy Mattermost to test the 'db' relation.\n\n    Mattermost needs TLS enabled on PostgreSQL to correctly connect to it.\n\n    Args:\n        ops_test: The ops test framework\n    ","descriptionHtml":"<p>Deploy Mattermost to test the 'db' relation.</p>\n<pre><code>Mattermost needs TLS enabled on PostgreSQL to correctly connect to it.\n\nArgs:\n    ops_test: The ops test framework\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":true,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1709083609524,"stop":1709083609524,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1709083609525,"stop":1709083609525,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1709083609525,"stop":1709083609783,"duration":258},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1709083617832,"stop":1709083617833,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Deploy Mattermost to test the 'db' relation.\n\n    Mattermost needs TLS enabled on PostgreSQL to correctly connect to it.\n\n    Args:\n        ops_test: The ops test framework\n    ","status":"passed","steps":[],"attachments":[{"uid":"af2a46b331119c9c","name":"log","source":"af2a46b331119c9c.txt","type":"text/plain","size":8919}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1709084901168,"stop":1709084901168,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1709084901169,"stop":1709084901584,"duration":415},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1709084901585,"stop":1709084901585,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1709084901585,"stop":1709084901585,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1709084901585,"stop":1709084901585,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_tls"},{"name":"host","value":"fv-az1198-60"},{"name":"thread","value":"12668-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_tls"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":2,"broken":15,"skipped":0,"passed":10,"unknown":0,"total":27},"items":[{"uid":"18c2e0566722926","reportUrl":"../1936//#testresult/18c2e0566722926","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/1 [executing] active:","time":{"start":1708997232768,"stop":1708998235396,"duration":1002628}},{"uid":"a719fa691e941e20","reportUrl":"../1931//#testresult/a719fa691e941e20","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/1 [executing] active:","time":{"start":1708910953220,"stop":1708911955996,"duration":1002776}},{"uid":"7396e4c19a2d816f","reportUrl":"../1927//#testresult/7396e4c19a2d816f","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/1 [executing] active:","time":{"start":1708738030577,"stop":1708739032459,"duration":1001882}},{"uid":"9f54a849789883ba","reportUrl":"../1922//#testresult/9f54a849789883ba","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/2 [executing] active:","time":{"start":1708651634086,"stop":1708652636382,"duration":1002296}},{"uid":"37c2e28f73ffdd79","reportUrl":"../1919//#testresult/37c2e28f73ffdd79","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/0 [idle] waiting: awaiting for cluster to start\n  postgresql-k8s/1 [idle] active: Primary\n  postgresql-k8s/2 [executing] active:","time":{"start":1708565248104,"stop":1708566250337,"duration":1002233}},{"uid":"a58cd93fdac55ae1","reportUrl":"../1916//#testresult/a58cd93fdac55ae1","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/0 [executing] active: \n  postgresql-k8s/1 [executing] active:","time":{"start":1708478883534,"stop":1708479886557,"duration":1003023}},{"uid":"66b364e6b96cf9c0","reportUrl":"../1911//#testresult/66b364e6b96cf9c0","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/2 [executing] active:","time":{"start":1708392455175,"stop":1708393457664,"duration":1002489}},{"uid":"f6aa521351ac1a92","reportUrl":"../1908//#testresult/f6aa521351ac1a92","status":"broken","statusDetails":"juju.errors.JujuAppError: App in error: postgresql-k8s","time":{"start":1708306138548,"stop":1708306150677,"duration":12129}},{"uid":"57b26d2ccf9c3279","reportUrl":"../1906//#testresult/57b26d2ccf9c3279","status":"passed","time":{"start":1708219738401,"stop":1708221046378,"duration":1307977}},{"uid":"79fc0442f04229df","reportUrl":"../1905//#testresult/79fc0442f04229df","status":"passed","time":{"start":1708133233755,"stop":1708134005719,"duration":771964}},{"uid":"7b2ac58169d78d61","reportUrl":"../1902//#testresult/7b2ac58169d78d61","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/2 [executing] active:","time":{"start":1708046838568,"stop":1708047840517,"duration":1001949}},{"uid":"77117ea8c340913b","reportUrl":"../1896//#testresult/77117ea8c340913b","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: mattermost/1","time":{"start":1707960482832,"stop":1707961577122,"duration":1094290}},{"uid":"7d1e458763b8443c","reportUrl":"../1892//#testresult/7d1e458763b8443c","status":"passed","time":{"start":1707874075814,"stop":1707875200518,"duration":1124704}},{"uid":"7bb9c12e7b3d7ae4","reportUrl":"../1884//#testresult/7bb9c12e7b3d7ae4","status":"passed","time":{"start":1707787695727,"stop":1707788878458,"duration":1182731}},{"uid":"1644c882a8c75563","reportUrl":"../1881//#testresult/1644c882a8c75563","status":"passed","time":{"start":1707701263815,"stop":1707702854073,"duration":1590258}},{"uid":"f8a7eee652555c2e","reportUrl":"../1880//#testresult/f8a7eee652555c2e","status":"passed","time":{"start":1707614939383,"stop":1707616121445,"duration":1182062}},{"uid":"f5741bb09af1c4c2","reportUrl":"../1879//#testresult/f5741bb09af1c4c2","status":"failed","statusDetails":"AssertionError: TLS is not being used on pg_rewind connections\nassert 'connection authorized: user=rewind database=postgres SSL enabled' in '/var/log/postgresql/postgresql-6_0128.log:2024-02-10 01:28:23 UTC [401]: user=operator,db=postgres,app=[unknown],client=10.1.0.93,line=5 LOG:  statement: GRANT ALL PRIVILEGES ON DATABASE postgres TO \"rewind\";\\n/var/log/postgresql/postgresql-6_0144.log:2024-02-10 01:44:20 UTC [4423]: user=operator,db=postgres,app=[unknown],client=10.1.0.93,line=4 LOG:  statement: CREATE TABLE pgrewindtest (testcol INT);\\n'","time":{"start":1707528399795,"stop":1707529650055,"duration":1250260}},{"uid":"a0ecb9313444ad76","reportUrl":"../1875//#testresult/a0ecb9313444ad76","status":"passed","time":{"start":1707442080948,"stop":1707443317186,"duration":1236238}},{"uid":"acfe905ccf58c96f","reportUrl":"../1870//#testresult/acfe905ccf58c96f","status":"broken","statusDetails":"juju.errors.JujuAppError: App in error: postgresql-k8s","time":{"start":1707355642961,"stop":1707355654795,"duration":11834}},{"uid":"82a4ac14c5c2a53a","reportUrl":"../1866//#testresult/82a4ac14c5c2a53a","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: mattermost/0","time":{"start":1707269222766,"stop":1707270302494,"duration":1079728}}]},"tags":["asyncio","group(1)"]},"source":"1e5be9cdaa1e86ee.json","parameterValues":[]}