{"uid":"d6f5d1a8aab1dcbe","name":"test_restart_db_process[/usr/bin/patroni]","fullName":"tests.integration.ha_tests.test_self_healing#test_restart_db_process","historyId":"2f08e1ab0e41cda77079b84fc6d18166","time":{"start":1711676307451,"stop":1711676351206,"duration":43755},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1711675778211,"stop":1711675778211,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1711675778212,"stop":1711675778448,"duration":236},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1711675778212,"stop":1711675778212,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout","time":{"start":1711676053266,"stop":1711676055418,"duration":2152},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1711676307450,"stop":1711676307450,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1711676307450,"stop":1711676307450,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"passed","steps":[],"attachments":[{"uid":"b6ace4498450dde3","name":"log","source":"b6ace4498450dde3.txt","type":"text/plain","size":2017}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1711676351206,"stop":1711676352227,"duration":1021},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1711676352228,"stop":1711676352228,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout::finalizer","time":{"start":1711678937528,"stop":1711679168645,"duration":231117},"status":"broken","statusMessage":"tenacity.RetryError: RetryError[<Future at 0x7f697c544100 state=finished raised AttributeError>]\n","statusTrace":"  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/.tox/integration/lib/python3.10/site-packages/allure_commons/_allure.py\", line 221, in __call__\n    return self._fixture_function(*args, **kwargs)\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 302, in finalizer\n    event_loop.run_until_complete(async_finalizer())\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 294, in async_finalizer\n    await gen_obj.__anext__()\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/tests/integration/ha_tests/conftest.py\", line 68, in primary_start_timeout\n    await change_patroni_setting(ops_test, \"primary_start_timeout\", initial_primary_start_timeout)\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/tests/integration/ha_tests/helpers.py\", line 97, in change_patroni_setting\n    for attempt in Retrying(stop=stop_after_delay(30 * 2), wait=wait_fixed(3)):\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 347, in __iter__\n    do = self.iter(retry_state=retry_state)\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 326, in iter\n    raise retry_exc from fut.exception()\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1711679168646,"stop":1711679169212,"duration":566},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1711679169214,"stop":1711679169214,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1711679169214,"stop":1711679169214,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1711679169214,"stop":1711679169214,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"fv-az698-658"},{"name":"thread","value":"13107-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"process","value":"'/usr/bin/patroni'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":4,"passed":46,"unknown":0,"total":50},"items":[{"uid":"8b95f68115984eef","reportUrl":"../2078//#testresult/8b95f68115984eef","status":"passed","time":{"start":1711589941209,"stop":1711589989316,"duration":48107}},{"uid":"ec3f6b78791b4323","reportUrl":"../2077//#testresult/ec3f6b78791b4323","status":"passed","time":{"start":1711503464387,"stop":1711503511309,"duration":46922}},{"uid":"26b997263b2820e","reportUrl":"../2073//#testresult/26b997263b2820e","status":"passed","time":{"start":1711417097187,"stop":1711417139196,"duration":42009}},{"uid":"dfebb58b4c2a6f1d","reportUrl":"../2069//#testresult/dfebb58b4c2a6f1d","status":"passed","time":{"start":1711330797520,"stop":1711330846599,"duration":49079}},{"uid":"e07274ce39e7d92c","reportUrl":"../2068//#testresult/e07274ce39e7d92c","status":"passed","time":{"start":1711244416615,"stop":1711244465897,"duration":49282}},{"uid":"a5945994bce9ff2c","reportUrl":"../2062//#testresult/a5945994bce9ff2c","status":"passed","time":{"start":1711157828429,"stop":1711157876610,"duration":48181}},{"uid":"2719721650da1395","reportUrl":"../2059//#testresult/2719721650da1395","status":"passed","time":{"start":1711071503903,"stop":1711071552020,"duration":48117}},{"uid":"a0bcd1705ef6d107","reportUrl":"../2053//#testresult/a0bcd1705ef6d107","status":"passed","time":{"start":1710985147451,"stop":1710985193411,"duration":45960}},{"uid":"a56652c6505b2944","reportUrl":"../2051//#testresult/a56652c6505b2944","status":"passed","time":{"start":1710898730680,"stop":1710898774555,"duration":43875}},{"uid":"783e3b6fa1e82044","reportUrl":"../2044//#testresult/783e3b6fa1e82044","status":"passed","time":{"start":1710812340022,"stop":1710812376926,"duration":36904}},{"uid":"253bfaaeaf773677","reportUrl":"../2032//#testresult/253bfaaeaf773677","status":"passed","time":{"start":1710725863109,"stop":1710725910073,"duration":46964}},{"uid":"8ab220387a286ace","reportUrl":"../2029//#testresult/8ab220387a286ace","status":"passed","time":{"start":1710639604136,"stop":1710639651207,"duration":47071}},{"uid":"e7e8ef8f127c465b","reportUrl":"../2027//#testresult/e7e8ef8f127c465b","status":"passed","time":{"start":1710553139779,"stop":1710553183578,"duration":43799}},{"uid":"218ec2b2820a0b3","reportUrl":"../2025//#testresult/218ec2b2820a0b3","status":"passed","time":{"start":1710466704419,"stop":1710466751468,"duration":47049}},{"uid":"cb7297e743708a7e","reportUrl":"../2021//#testresult/cb7297e743708a7e","status":"passed","time":{"start":1710380274176,"stop":1710380318991,"duration":44815}},{"uid":"21d55e6909ab1207","reportUrl":"../2015//#testresult/21d55e6909ab1207","status":"passed","time":{"start":1710293874844,"stop":1710293921844,"duration":47000}},{"uid":"2155ab48b7334e4d","reportUrl":"../2011//#testresult/2155ab48b7334e4d","status":"passed","time":{"start":1710207452968,"stop":1710207501918,"duration":48950}},{"uid":"7df1a36b117dc143","reportUrl":"../2005//#testresult/7df1a36b117dc143","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1710120666167,"stop":1710120666167,"duration":0}},{"uid":"18f87fbb7bbb147d","reportUrl":"../2000//#testresult/18f87fbb7bbb147d","status":"passed","time":{"start":1710034710702,"stop":1710034758735,"duration":48033}},{"uid":"e5f9b6eabe7a5c05","reportUrl":"../1997//#testresult/e5f9b6eabe7a5c05","status":"passed","time":{"start":1709948138338,"stop":1709948185363,"duration":47025}}]},"tags":["asyncio","group(1)"]},"source":"d6f5d1a8aab1dcbe.json","parameterValues":["'/usr/bin/patroni'"]}