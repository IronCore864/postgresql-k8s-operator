{"uid":"5a210c5f7fde862e","name":"test_mattermost_db","fullName":"tests.integration.test_tls#test_mattermost_db","historyId":"cdae414860de0e7068bea24175d8d4b0","time":{"start":1715218471105,"stop":1715219756051,"duration":1284946},"description":"Deploy Mattermost to test the 'db' relation.\n\n    Mattermost needs TLS enabled on PostgreSQL to correctly connect to it.\n\n    Args:\n        ops_test: The ops test framework\n    ","descriptionHtml":"<p>Deploy Mattermost to test the 'db' relation.</p>\n<pre><code>Mattermost needs TLS enabled on PostgreSQL to correctly connect to it.\n\nArgs:\n    ops_test: The ops test framework\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":true,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1715218461634,"stop":1715218461635,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1715218461635,"stop":1715218461635,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1715218461635,"stop":1715218461860,"duration":225},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1715218471105,"stop":1715218471105,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Deploy Mattermost to test the 'db' relation.\n\n    Mattermost needs TLS enabled on PostgreSQL to correctly connect to it.\n\n    Args:\n        ops_test: The ops test framework\n    ","status":"passed","steps":[],"attachments":[{"uid":"a279badeef08cea3","name":"log","source":"a279badeef08cea3.txt","type":"text/plain","size":9872}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1715219756051,"stop":1715219756051,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1715219756052,"stop":1715219756400,"duration":348},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1715219756400,"stop":1715219756401,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1715219756401,"stop":1715219756401,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1715219756401,"stop":1715219756401,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_tls"},{"name":"host","value":"fv-az711-717"},{"name":"thread","value":"12741-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_tls"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":3,"broken":61,"skipped":0,"passed":24,"unknown":0,"total":88},"items":[{"uid":"51be9f1f3ff2365f","reportUrl":"../2279//#testresult/51be9f1f3ff2365f","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: postgresql-k8s/1","time":{"start":1715131477890,"stop":1715131650337,"duration":172447}},{"uid":"1bb5765ac36b59f0","reportUrl":"../2276//#testresult/1bb5765ac36b59f0","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/1 [executing] active: \n  postgresql-k8s/2 [executing] active:","time":{"start":1715045546280,"stop":1715046548475,"duration":1002195}},{"uid":"e735d3440e912f25","reportUrl":"../2272//#testresult/e735d3440e912f25","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/1 [idle] active: \n  postgresql-k8s/2 [executing] active:","time":{"start":1714959074014,"stop":1714960076290,"duration":1002276}},{"uid":"d653196bee18121c","reportUrl":"../2270//#testresult/d653196bee18121c","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/2 [executing] active:","time":{"start":1714872823910,"stop":1714873826032,"duration":1002122}},{"uid":"f5527bc26458c63d","reportUrl":"../2268//#testresult/f5527bc26458c63d","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/0 [executing] active: \n  postgresql-k8s/2 [executing] active:","time":{"start":1714786250878,"stop":1714787252996,"duration":1002118}},{"uid":"7e0d9111f1f3e373","reportUrl":"../2263//#testresult/7e0d9111f1f3e373","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/2 [executing] active:","time":{"start":1714699954911,"stop":1714700957297,"duration":1002386}},{"uid":"81c655c778baa077","reportUrl":"../2254//#testresult/81c655c778baa077","status":"passed","time":{"start":1714613534774,"stop":1714615032604,"duration":1497830}},{"uid":"5a6e34a558faa825","reportUrl":"../2252//#testresult/5a6e34a558faa825","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/2 [executing] active:","time":{"start":1714527242600,"stop":1714528244999,"duration":1002399}},{"uid":"a3fd4a35d654efd9","reportUrl":"../2241//#testresult/a3fd4a35d654efd9","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: postgresql-k8s/1","time":{"start":1714440736536,"stop":1714441026961,"duration":290425}},{"uid":"ebedb6abef801614","reportUrl":"../2233//#testresult/ebedb6abef801614","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/2 [executing] active:","time":{"start":1714354433928,"stop":1714355436075,"duration":1002147}},{"uid":"46b548b5baf39645","reportUrl":"../2230//#testresult/46b548b5baf39645","status":"passed","time":{"start":1714267961188,"stop":1714269217998,"duration":1256810}},{"uid":"45c65559b0d07522","reportUrl":"../2226//#testresult/45c65559b0d07522","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/2 [executing] active:","time":{"start":1714181430434,"stop":1714182432569,"duration":1002135}},{"uid":"ee3f45bc51ed533e","reportUrl":"../2221//#testresult/ee3f45bc51ed533e","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/2 [executing] active:","time":{"start":1714095200207,"stop":1714096202399,"duration":1002192}},{"uid":"338176487832e528","reportUrl":"../2208//#testresult/338176487832e528","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: mattermost/0","time":{"start":1714009013781,"stop":1714010137036,"duration":1123255}},{"uid":"eabde92ac9b622d3","reportUrl":"../2199//#testresult/eabde92ac9b622d3","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/1 [idle] active: \n  postgresql-k8s/2 [executing] active:","time":{"start":1713835968610,"stop":1713836970701,"duration":1002091}},{"uid":"3e352951730b8d7a","reportUrl":"../2186//#testresult/3e352951730b8d7a","status":"failed","statusDetails":"AssertionError: TLS is not being used on pg_rewind connections\nassert 'connection authorized: user=rewind database=postgres SSL enabled' in '/var/log/postgresql/postgresql-1_0132.log:2024-04-22 01:32:58 UTC [438]: user=operator,db=postgres,app=[unknown],client=10.1.0.130,line=5 LOG:  statement: GRANT ALL PRIVILEGES ON DATABASE postgres TO \"rewind\";\\n/var/log/postgresql/postgresql-1_0146.log:2024-04-22 01:46:59 UTC [4608]: user=operator,db=postgres,app=[unknown],client=10.1.0.130,line=4 LOG:  statement: CREATE TABLE pgrewindtest (testcol INT);\\n'","time":{"start":1713749469845,"stop":1713750608858,"duration":1139013}},{"uid":"e61069f8dc68e679","reportUrl":"../2176//#testresult/e61069f8dc68e679","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/2 [executing] active:","time":{"start":1713663127286,"stop":1713664129468,"duration":1002182}},{"uid":"2b41be058deadf50","reportUrl":"../2170//#testresult/2b41be058deadf50","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/2 [executing] active:","time":{"start":1713576672850,"stop":1713577669878,"duration":997028}},{"uid":"3ff13a3d75bd1910","reportUrl":"../2168//#testresult/3ff13a3d75bd1910","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: postgresql-k8s/0","time":{"start":1713490287361,"stop":1713490518041,"duration":230680}},{"uid":"59dbe24b8efeb276","reportUrl":"../2166//#testresult/59dbe24b8efeb276","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\npostgresql-k8s/0 [executing] active: \n  postgresql-k8s/1 [executing] active:","time":{"start":1713403813940,"stop":1713404816188,"duration":1002248}}]},"tags":["asyncio","group(1)"]},"source":"5a210c5f7fde862e.json","parameterValues":[]}