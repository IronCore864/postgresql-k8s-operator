{"uid":"fcc82db38676ad34","name":"test_forceful_restart_without_data_and_transaction_logs","fullName":"tests.integration.ha_tests.test_self_healing#test_forceful_restart_without_data_and_transaction_logs","historyId":"1ab295315f12ae381caee21d2bb9082a","time":{"start":1710381044996,"stop":1710381105984,"duration":60988},"description":"A forceful restart with deleted data and without transaction logs (forced clone).","descriptionHtml":"<p>A forceful restart with deleted data and without transaction logs (forced clone).</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1710379737969,"stop":1710379737970,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1710379737970,"stop":1710379738194,"duration":224},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1710379737970,"stop":1710379737970,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout","time":{"start":1710380046054,"stop":1710380048217,"duration":2163},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1710381040795,"stop":1710381040795,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1710381040795,"stop":1710381040796,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"wal_settings","time":{"start":1710381040796,"stop":1710381044995,"duration":4199},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"A forceful restart with deleted data and without transaction logs (forced clone).","status":"passed","steps":[],"attachments":[{"uid":"dada9366eed4058e","name":"log","source":"dada9366eed4058e.txt","type":"text/plain","size":3605}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"wal_settings::finalizer","time":{"start":1710381105985,"stop":1710381106081,"duration":96},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes::finalizer","time":{"start":1710381106081,"stop":1710381107115,"duration":1034},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1710381107116,"stop":1710381107116,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"primary_start_timeout::finalizer","time":{"start":1710382850493,"stop":1710383002637,"duration":152144},"status":"broken","statusMessage":"tenacity.RetryError: RetryError[<Future at 0x748f50dd8f40 state=finished raised RetryError>]\n","statusTrace":"  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/.tox/integration/lib/python3.10/site-packages/allure_commons/_allure.py\", line 221, in __call__\n    return self._fixture_function(*args, **kwargs)\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 302, in finalizer\n    event_loop.run_until_complete(async_finalizer())\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 294, in async_finalizer\n    await gen_obj.__anext__()\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/tests/integration/ha_tests/conftest.py\", line 68, in primary_start_timeout\n    await change_patroni_setting(ops_test, \"primary_start_timeout\", initial_primary_start_timeout)\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/tests/integration/ha_tests/helpers.py\", line 97, in change_patroni_setting\n    for attempt in Retrying(stop=stop_after_delay(30 * 2), wait=wait_fixed(3)):\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 347, in __iter__\n    do = self.iter(retry_state=retry_state)\n  File \"/home/runner/work/postgresql-k8s-operator/postgresql-k8s-operator/.tox/integration/lib/python3.10/site-packages/tenacity/__init__.py\", line 326, in iter\n    raise retry_exc from fut.exception()\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1710383002638,"stop":1710383003026,"duration":388},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1710383003027,"stop":1710383003028,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1710383003028,"stop":1710383003028,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1710383003028,"stop":1710383003028,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"fv-az570-14"},{"name":"thread","value":"12517-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":3,"broken":1,"skipped":4,"passed":27,"unknown":0,"total":35},"items":[{"uid":"b22433fae6527b57","reportUrl":"../2015//#testresult/b22433fae6527b57","status":"passed","time":{"start":1710294619468,"stop":1710294678285,"duration":58817}},{"uid":"c0c1219df00eea5","reportUrl":"../2011//#testresult/c0c1219df00eea5","status":"passed","time":{"start":1710208220209,"stop":1710208277622,"duration":57413}},{"uid":"81611f250bf76094","reportUrl":"../2005//#testresult/81611f250bf76094","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1710120666182,"stop":1710120666182,"duration":0}},{"uid":"ba0a47ff1659bae7","reportUrl":"../2000//#testresult/ba0a47ff1659bae7","status":"passed","time":{"start":1710035459268,"stop":1710035519106,"duration":59838}},{"uid":"faef3f4eb3aaba3c","reportUrl":"../1997//#testresult/faef3f4eb3aaba3c","status":"passed","time":{"start":1709948891248,"stop":1709948948017,"duration":56769}},{"uid":"ffe78c214b98f1bf","reportUrl":"../1993//#testresult/ffe78c214b98f1bf","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1709861411072,"stop":1709861411072,"duration":0}},{"uid":"d9368d1e18b7deab","reportUrl":"../1986//#testresult/d9368d1e18b7deab","status":"passed","time":{"start":1709775715171,"stop":1709775771172,"duration":56001}},{"uid":"3c21a56d41755988","reportUrl":"../1943//#testresult/3c21a56d41755988","status":"passed","time":{"start":1709084988140,"stop":1709085045152,"duration":57012}},{"uid":"95e0034837a7c29b","reportUrl":"../1936//#testresult/95e0034837a7c29b","status":"passed","time":{"start":1708998488909,"stop":1708998549945,"duration":61036}},{"uid":"a2a182b516894f60","reportUrl":"../1931//#testresult/a2a182b516894f60","status":"passed","time":{"start":1708912223690,"stop":1708912279825,"duration":56135}},{"uid":"153b1258ca843ce5","reportUrl":"../1927//#testresult/153b1258ca843ce5","status":"passed","time":{"start":1708739363796,"stop":1708739419876,"duration":56080}},{"uid":"b93580bca966ad6b","reportUrl":"../1922//#testresult/b93580bca966ad6b","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1708651745757,"stop":1708651745757,"duration":0}},{"uid":"cd18dcef12c2c2ab","reportUrl":"../1919//#testresult/cd18dcef12c2c2ab","status":"passed","time":{"start":1708566478059,"stop":1708566540016,"duration":61957}},{"uid":"a462b2fe03fa9260","reportUrl":"../1916//#testresult/a462b2fe03fa9260","status":"passed","time":{"start":1708480217527,"stop":1708480279238,"duration":61711}},{"uid":"f469a21898b6514f","reportUrl":"../1911//#testresult/f469a21898b6514f","status":"passed","time":{"start":1708393680903,"stop":1708393736171,"duration":55268}},{"uid":"22dd6fcddce32c45","reportUrl":"../1908//#testresult/22dd6fcddce32c45","status":"passed","time":{"start":1708307331844,"stop":1708307393860,"duration":62016}},{"uid":"2ea02c7962aced2","reportUrl":"../1906//#testresult/2ea02c7962aced2","status":"passed","time":{"start":1708220937920,"stop":1708221033951,"duration":96031}},{"uid":"6b0ffe83ad032dee","reportUrl":"../1905//#testresult/6b0ffe83ad032dee","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1708133350387,"stop":1708133350387,"duration":0}},{"uid":"e1c310dbcb42d2b4","reportUrl":"../1902//#testresult/e1c310dbcb42d2b4","status":"passed","time":{"start":1708048141331,"stop":1708048198780,"duration":57449}},{"uid":"37047b9d442f141a","reportUrl":"../1896//#testresult/37047b9d442f141a","status":"passed","time":{"start":1707961706367,"stop":1707961770209,"duration":63842}}]},"tags":["asyncio","group(1)"]},"source":"fcc82db38676ad34.json","parameterValues":[]}